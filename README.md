# Задание 3

Мобилизация.Гифки – сервис для поиска гифок в перерывах между занятиями.

Сервис написан с использованием [bem-components](https://ru.bem.info/platform/libs/bem-components/5.0.0/).

Работа избранного в оффлайне реализована с помощью технологии [Service Worker](https://developer.mozilla.org/ru/docs/Web/API/Service_Worker_API/Using_Service_Workers).

Для поиска изображений используется [API сервиса Giphy](https://github.com/Giphy/GiphyAPI).

В браузерах, не поддерживающих сервис-воркеры, приложение так же должно корректно работать, 
за исключением возможности работы в оффлайне.

## Структура проекта

  * `gifs.html` – точка входа
  * `assets` – статические файлы проекта
  * `vendor` –  статические файлы внешних библиотек
  * `service-worker.js` – скрипт сервис-воркера

Открывать `gifs.html` нужно с помощью локального веб-сервера – не как файл. 
Это можно сделать с помощью встроенного в WebStorm/Idea веб-сервера, с помощью простого сервера
из состава PHP или Python. Можно воспользоваться и любым другим способом.

# Найденные проблемы и их решения

# Проблема 1

Создавая Service Worker, мы должны помнить о том, что у каждого SW есть свое пространство (scope), на котором он работает. По умолчанию, его scope будет директория, в которой данный SW лежит. Стоит заметить, что scope нельзя изменить на уровень выше, только на уровень(-ни) ниже.

В данном случае, проект имеет helper `service-worker`, расположенный в файле `assets/blocks.js`, который регистрирует SW `assets/service-worker.js`. Соответственно, . Для того, чтобы SW работал правильно, можно воспользоваться следующим решением:

Перенести `assets/service-worker.js` в корень проекта, при этом изменив путь к SW в `assets/blocks.js`.

# Проблема 2

Ресурсы приложения не кэшируется для offline-режима. Будем кэшировать ресурсы на этапе установки SW, так мы добъемся еще и возможность переключения в offline-режим сразу после первого запроса.

# Проблема 3

Невозможно обновить ресурсы приложения. Так как ключем главного кэша является константа CACHE_VERSION, все, что требуется сделать для обновления HTML / CSS / JS - это изменить данный ключ, например, c `1.0.0-broken` на `1.0.1`.

Далее нужно ждать пока браузер обновит Service Worker.

# Проблема 4

Gif не добавляется в кэш из результата поиска, когда интернет отключен. Добавление новой картинки в избранное происходит в функции `handleFavoriteAdd`. В нее нужно добавить обработчик, который будет добавлять незагрузившиеся запросы в массив `cacheFail`.